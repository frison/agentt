---
# Jekyll needs front matter even for CSS files to process them
---
@import "minima"; // Import the base theme styles first

// --- Variables ---
$base-font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
$heading-font-family: 'Quicksand', sans-serif;

$base-font-size:   16px;
$base-font-weight: 400;
$bold-font-weight: 600;
$heading-font-weight: 700;
$small-font-size:  $base-font-size * 0.875;
$base-line-height: 1.6;

$spacing-unit:     30px;

// Base Color Palette (SCSS for defining CSS Vars)
$light-brand-primary:   #0077cc;
$light-brand-secondary: #33aabb;
$light-brand-accent:    #ff6f61;
$light-text-color:       #333;
$light-background-color: #fdfdfd;
$light-grey-color:       #828282;
$light-grey-color-light: #e0e0e0;
$light-code-background: #f6f8fa;
$light-footer-background: #f9f9f9;
$light-header-background: lighten($light-brand-secondary, 35%);
$light-header-title-color: darken($light-brand-secondary, 15%);
$light-link-hover-color: darken($light-brand-primary, 15%);
$light-blockquote-border: $light-grey-color-light;
$light-post-excerpt-color: darken($light-grey-color, 10%);
$light-read-more-hover-color: darken($light-brand-accent, 10%);

$dark-brand-primary:    #3399ff; // Brighter blue for dark
$dark-brand-secondary:  #5ee3d6; // Brighter teal
$dark-brand-accent:     #ff8a80; // Brighter coral
$dark-text-color:        #f0f0f0; // Off-white text
$dark-background-color:  #1e1e1e; // Dark grey background
$dark-grey-color:        #a0a0a0; // Lighter grey for dark
$dark-grey-color-light:  #444444; // Darker subtle borders
$dark-code-background:  #2a2a2a; // Dark code bg
$dark-footer-background: #252525;
$dark-header-background: darken($dark-brand-secondary, 45%); // Darker teal bg
$dark-header-title-color: lighten($dark-brand-secondary, 25%); // Lighter teal title
$dark-link-hover-color: lighten($dark-brand-primary, 15%);
$dark-blockquote-border: $dark-grey-color-light;
$dark-post-excerpt-color: lighten($dark-grey-color, 10%);
$dark-read-more-hover-color: lighten($dark-brand-accent, 10%);


// --- CSS Variables ---
:root, html[data-theme="light"] {
  // Light theme variables defined here
  --brand-primary: #{$light-brand-primary};
  --brand-secondary: #{$light-brand-secondary};
  --brand-accent: #{$light-brand-accent};
  --text-color: #{$light-text-color};
  --background-color: #{$light-background-color};
  --grey-color: #{$light-grey-color};
  --grey-color-light: #{$light-grey-color-light};
  --code-background: #{$light-code-background};
  --code-text-color: var(--text-color);
  --footer-background: #{$light-footer-background};
  --header-background: #{$light-header-background};
  --header-title-color: #{$light-header-title-color};
  --link-hover-color: #{$light-link-hover-color};
  --blockquote-border-color: #{$light-blockquote-border};
  --post-excerpt-color: #{$light-post-excerpt-color};
  --read-more-hover-color: #{$light-read-more-hover-color};
  --site-nav-link-color: var(--brand-primary);
  --site-nav-link-hover-color: var(--brand-accent);
  --footer-link-color: var(--grey-color);
  --footer-link-hover-color: var(--brand-accent);
  --post-preview-link-hover-color: var(--brand-accent);
  --post-preview-category-link-color: var(--grey-color);
  --post-preview-category-link-hover-color: var(--brand-primary);
}

html[data-theme="dark"] {
  // Dark theme variables defined here
  --brand-primary: #{$dark-brand-primary};
  --brand-secondary: #{$dark-brand-secondary};
  --brand-accent: #{$dark-brand-accent};
  --text-color: #{$dark-text-color};
  --background-color: #{$dark-background-color};
  --grey-color: #{$dark-grey-color};
  --grey-color-light: #{$dark-grey-color-light};
  --code-background: #{$dark-code-background};
  --code-text-color: var(--text-color);
  --footer-background: #{$dark-footer-background};
  --header-background: #{$dark-header-background};
  --header-title-color: #{$dark-header-title-color};
  --link-hover-color: #{$dark-link-hover-color};
  --blockquote-border-color: #{$dark-blockquote-border};
  --post-excerpt-color: #{$dark-post-excerpt-color};
  --read-more-hover-color: #{$dark-read-more-hover-color};
  --site-nav-link-color: var(--brand-primary);
  --site-nav-link-hover-color: var(--brand-accent);
  --footer-link-color: var(--grey-color);
  --footer-link-hover-color: var(--brand-accent);
  --post-preview-link-hover-color: var(--brand-accent);
  --post-preview-category-link-color: var(--grey-color);
  --post-preview-category-link-hover-color: var(--brand-primary);

  // Specific overrides for dark mode if needed beyond variables
  pre.highlight, .highlight pre {
     // Add specific dark-mode syntax highlighting overrides here if necessary
  }
}


$content-width:    800px;

// --- Base Styles ---
body {
  font-family: $base-font-family;
  font-size: $base-font-size;
  line-height: $base-line-height;
  font-weight: $base-font-weight;
  color: var(--text-color);
  background-color: var(--background-color);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  margin: 0;
  padding: 0;
  transition: background-color 0.3s ease, color 0.3s ease; // Smooth theme transition
}

// --- Structure & Wrapper ---
.wrapper {
  max-width: calc(#{$content-width} - (#{$spacing-unit})); // A bit less wide than pure content
  margin-right: auto;
  margin-left: auto;
  padding-right: calc($spacing-unit / 2);
  padding-left: calc($spacing-unit / 2);
  @media screen and (min-width: $content-width) {
    max-width: calc(#{$content-width} - #{$spacing-unit});
    padding-right: $spacing-unit;
    padding-left: $spacing-unit;
  }
}

// --- Links ---
a {
  color: var(--brand-primary);
  text-decoration: none;

  &:hover {
    color: var(--link-hover-color);
    text-decoration: underline;
  }
}

// --- Headings ---
h1, h2, h3, h4, h5, h6 {
  font-family: $heading-font-family;
  font-weight: $heading-font-weight;
  margin-top: $spacing-unit * 1.5;
  margin-bottom: $spacing-unit * 0.75;
  line-height: 1.3;
}
h1 { font-size: 2em; }
h2 { font-size: 1.75em; }
h3 { font-size: 1.5em; }
h4 { font-size: 1.25em; }
h5 { font-size: 1.1em; }
h6 { font-size: 1em; }

// --- Block elements ---
p, ul, ol, dl, blockquote {
  margin-top: 0;
  margin-bottom: $spacing-unit * 0.5;
}

ul, ol {
  padding-left: $spacing-unit;
}

blockquote {
  color: var(--grey-color);
  border-left: 4px solid var(--blockquote-border-color);
  padding-left: calc($spacing-unit / 2);
  font-size: $small-font-size * 1.1;
  letter-spacing: -1px;
  font-style: italic;
  margin-left: 0;
}

// --- Code Formatting ---
pre, code {
  font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
  font-size: 0.9em;
  border: 1px solid var(--grey-color-light);
  border-radius: 3px;
  background-color: var(--code-background);
  color: var(--code-text-color); // Use variable for code text
}

code {
  padding: 1px 5px;
}

pre {
  padding: 8px 12px;
  overflow-x: auto;

  > code {
    border: 0;
    padding-right: 0;
    padding-left: 0;
  }
}

// --- Header ---
.site-header {
  border-bottom: 1px solid var(--grey-color-light);
  padding: calc($spacing-unit / 2) 0;
  background-color: var(--header-background);

  .wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
}

.site-title {
  font-family: $heading-font-family;
  font-size: 1.6em;
  font-weight: $heading-font-weight;
  line-height: 1;
  color: var(--header-title-color);
  margin-bottom: 0;

  &:hover {
    text-decoration: none;
    color: var(--brand-primary); // Use primary brand color on hover
  }
}

.site-nav {
  a {
    margin-left: 15px;
    color: var(--site-nav-link-color);
    font-weight: $bold-font-weight;
    &:hover {
      color: var(--site-nav-link-hover-color);
    }
  }
}

// --- Main Content ---
.page-content {
  padding: $spacing-unit 0;
}

// --- Posts ---
.post-header {
  margin-bottom: $spacing-unit;
}

.post-title {
  font-size: 2.2em;
  letter-spacing: -1px;
  line-height: 1.2;
  color: var(--brand-secondary); // Use secondary brand color
  margin-bottom: 0.2em;
}

.post-meta {
  font-size: $small-font-size;
  color: var(--grey-color);
}

.post-content {
  margin-bottom: $spacing-unit;

  h2, h3, h4 {
    margin-top: $spacing-unit;
  }
}

// --- Footer ---
.site-footer {
  border-top: 1px solid var(--grey-color-light);
  padding: $spacing-unit 0;
  background-color: var(--footer-background);
  font-size: $small-font-size;
  color: var(--grey-color);
  text-align: center;

  a {
    color: var(--footer-link-color);
    font-weight: $bold-font-weight;
    &:hover {
      color: var(--footer-link-hover-color);
      text-decoration: underline;
    }
  }
}

// --- Homepage specific styles ---
.home {
  .site-description {
    font-size: 1.1em;
    color: var(--grey-color);
    margin-bottom: $spacing-unit * 1.5;
    text-align: center;
    font-style: italic;
  }

  .page-heading { // Style for "Recent Posts"
    text-align: center;
    margin-bottom: $spacing-unit;
    color: var(--brand-secondary);
  }
}

.post-list {
  list-style: none;
  padding-left: 0;

  li {
    margin-bottom: $spacing-unit * 1.5;
    padding-bottom: $spacing-unit * 1.5;
    border-bottom: 1px solid var(--grey-color-light);

    &:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
  }
}

.post-preview { // Style for each post summary block
  h2 {
    margin-top: 0;
    margin-bottom: 0.2em;
    font-size: 1.6em; // Slightly smaller than single post title
    a {
      color: var(--brand-primary);
       &:hover {
         color: var(--post-preview-link-hover-color);
         text-decoration: none;
       }
    }
  }

  .post-meta { // Reuse existing meta style
    display: block;
    margin-bottom: $spacing-unit * 0.5;
    color: var(--grey-color); // Ensure meta text also uses variable

    .post-categories {
      font-size: 0.9em;
      a {
        color: var(--post-preview-category-link-color); // Use variable
        font-weight: normal;
        &:hover {
          color: var(--post-preview-category-link-hover-color); // Use variable
          text-decoration: underline;
        }
      }
    }
  }

  .post-excerpt {
    margin-top: $spacing-unit * 0.5;
    margin-bottom: $spacing-unit * 0.5;
    color: var(--post-excerpt-color); // Use variable
  }

  .read-more {
    display: inline-block;
    font-weight: $bold-font-weight;
    font-size: $small-font-size;
    color: var(--brand-accent);
     &:hover {
       text-decoration: underline;
       color: var(--read-more-hover-color); // Use variable
     }
  }
}

// --- Theme Toggle Button ---
.theme-toggle {
  background: none;
  border: none;
  color: var(--text-color);
  cursor: pointer;
  font-size: 1.2em; // Make icon slightly larger
  padding: 0 5px;
  margin-left: 10px; // Space it from nav links
  line-height: 1; // Prevent extra vertical space

  .icon-sun {
    display: none; // Hide sun by default
  }
  .icon-moon {
    display: inline; // Show moon by default
  }

  &:hover {
    color: var(--brand-accent);
  }
}

html[data-theme="dark"] .theme-toggle {
  .icon-sun {
    display: inline; // Show sun in dark mode
  }
  .icon-moon {
    display: none; // Hide moon in dark mode
  }
}

// --- Responsive ---
@media screen and (max-width: 600px) {
  .site-header .wrapper {
    flex-direction: column;
  }
  .site-title {
    margin-bottom: 10px;
    text-align: center;
  }
  .site-nav a {
     margin: 0 7px;
  }
  .post-title {
    font-size: 1.8em;
  }
}